document.addEventListener('DOMContentLoaded',()=>{document.getElementById('process-btn').addEventListener('click',()=>{const f=document.getElementById('file-input').files[0],q=parseFloat(document.getElementById('quality').value),d=document.getElementById('download-link');if(!f||!f.type.includes('jpeg')){alert('Select a JPG/JPEG image for compression.');return}const r=new FileReader();r.onload=e=>{const i=new Image();i.onload=()=>{const c=document.createElement('canvas');c.width=i.width;c.height=i.height;c.getContext('2d').drawImage(i,0,0);c.toBlob(b=>{d.href=URL.createObjectURL(b);d.download=`compressed-${f.name}`;d.classList.remove('hidden');showResetButton()},'image/jpeg',q)};i.src=e.target.result};r.readAsDataURL(f)})});