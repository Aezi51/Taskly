document.addEventListener('DOMContentLoaded',()=>{document.getElementById('process-btn').addEventListener('click',async()=>{const f=Array.from(document.getElementById('file-input').files),w=parseInt(document.getElementById('width').value),s=document.getElementById('status'),d=document.getElementById('download-links');if(f.length===0||!w){alert('Select files and enter a width.');return}s.textContent='Processing...';d.innerHTML='';for(const file of f){const i=await new Promise(res=>{const img=new Image();img.onload=()=>res(img);img.src=URL.createObjectURL(file)});const r=i.height/i.width,h=Math.round(w*r),c=document.createElement('canvas');c.width=w;c.height=h;c.getContext('2d').drawImage(i,0,0,w,h);c.toBlob(b=>{const a=document.createElement('a');a.href=URL.createObjectURL(b);a.download=`resized-${file.name}`;a.className='inline-block w-full bg-emerald-500/20 text-emerald-300 p-2 rounded mb-2';a.textContent=`Download ${file.name}`;d.appendChild(a)},'image/jpeg')}s.textContent='Batch process complete.';showResetButton()})});