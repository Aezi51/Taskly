document.addEventListener('DOMContentLoaded',()=>{document.getElementById('process-btn').addEventListener('click',async()=>{const f=Array.from(document.getElementById('file-input').files);if(f.length<2){alert('Select at least 2 images.');return}const d=document.getElementById('download-link');let totalW=0,maxH=0;const images=await Promise.all(f.map(file=>new Promise(res=>{const i=new Image();i.onload=()=>res(i);i.src=URL.createObjectURL(file)})));images.forEach(i=>{totalW+=i.width;maxH=Math.max(maxH,i.height)});const c=document.createElement('canvas');c.width=totalW;c.height=maxH;const x=c.getContext('2d');let currentX=0;images.forEach(i=>{x.drawImage(i,currentX,0);currentX+=i.width});d.href=c.toDataURL();d.download='combined.png';d.classList.remove('hidden');showResetButton()})});