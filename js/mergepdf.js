document.addEventListener('DOMContentLoaded',async()=>{document.getElementById('process-btn').addEventListener('click',async()=>{const f=document.getElementById('file-input'),d=document.getElementById('download-link'),s=document.getElementById('status');if(f.files.length<2){alert('Please select at least two PDF files to merge.');return}try{s.textContent='Merging PDFs...';d.classList.add('hidden');const{PDFDocument}=PDFLib;const m=await PDFDocument.create();for(const file of f.files){const p=await PDFDocument.load(await file.arrayBuffer());const c=await m.copyPages(p,p.getPageIndices());c.forEach(p=>m.addPage(p))}const b=await m.save();d.href=URL.createObjectURL(new Blob([b],{type:'application/pdf'}));d.download='merged.pdf';d.classList.remove('hidden');s.textContent='Merge successful!';showResetButton();}catch(e){s.textContent=`Error: ${e.message}`}})});